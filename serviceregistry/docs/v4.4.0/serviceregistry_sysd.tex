\documentclass[a4paper]{arrowhead}

\usepackage[yyyymmdd]{datetime}
\usepackage{etoolbox}
\usepackage[utf8]{inputenc}
\usepackage{multirow}

\renewcommand{\dateseparator}{-}

\setlength{\parskip}{1em}

%% Special references
\newcommand{\fref}[1]{{\textcolor{ArrowheadBlue}{\hyperref[sec:functions:#1]{#1}}}}
\newcommand{\mref}[1]{{\textcolor{ArrowheadPurple}{\hyperref[sec:model:#1]{#1}}}}
\newcommand{\pdef}[1]{{\textcolor{ArrowheadGrey}{#1\label{sec:model:primitives:#1}\label{sec:model:primitives:#1s}\label{sec:model:primitives:#1es}}}}
\newcommand{\pref}[1]{{\textcolor{ArrowheadGrey}{\hyperref[sec:model:primitives:#1]{#1}}}}

\newrobustcmd\fsubsection[3]{
  \addtocounter{subsection}{1}
  \addcontentsline{toc}{subsection}{\protect\numberline{\thesubsection}function \textcolor{ArrowheadBlue}{#1}}
  \renewcommand*{\do}[1]{\rref{##1},\ }
  \subsection*{
    \thesubsection\quad
    operation
    \textcolor{ArrowheadBlue}{#1}
    (\notblank{#2}{\mref{#2}}{})
    \notblank{#3}{: \mref{#3}}{}
  }
  \label{sec:functions:#1}
}
\newrobustcmd\msubsection[2]{
  \addtocounter{subsection}{1}
  \addcontentsline{toc}{subsection}{\protect\numberline{\thesubsection}#1 \textcolor{ArrowheadPurple}{#2}}
  \subsection*{\thesubsection\quad#1 \textcolor{ArrowheadPurple}{#2}}
  \label{sec:model:#2} \label{sec:model:#2s} \label{sec:model:#2es}
}

\begin{document}

%% Arrowhead Document Properties
\ArrowheadTitle{Service Registry Core System}
\ArrowheadType{System Description}
\ArrowheadTypeShort{SysD}
\ArrowheadVersion{4.4.0}
\ArrowheadDate{\today}
\ArrowheadAuthor{Tam√°s Bordi}
\ArrowheadStatus{RELEASE}
\ArrowheadContact{tbordi@aitia.ai}
\ArrowheadFooter{\href{www.arrowhead.eu}{www.arrowhead.eu}}
\ArrowheadSetup
%%

%% Front Page
\begin{center}
  \vspace*{1cm}
  \huge{\arrowtitle}

  \vspace*{0.2cm}
  \LARGE{\arrowtype}
  \vspace*{1cm}

  %\Large{Service ID: \textit{"\arrowid"}}
  \vspace*{\fill}

  % Front Page Image
  %\includegraphics{figures/TODO}

  \vspace*{1cm}
  \vspace*{\fill}

  % Front Page Abstract
  \begin{abstract}
    This is the template for System Description (SysD document)
    according to the Eclipse Arrowehad documentation structure. 
  \end{abstract}

  \vspace*{1cm}

%   \scriptsize
%   \begin{tabularx}{\textwidth}{l X}
%     \raisebox{-0.5\height}{\includegraphics[width=2cm]{figures/artemis_logo}} & {ARTEMIS Innovation Pilot Project: Arrowhead\newline
%     THEME [SP1-JTI-ARTEMIS-2012-AIPP4 SP1-JTI-ARTEMIS-2012-AIPP6]\newline
%     [Production and Energy System Automation Intelligent-Built environment and urban infrastructure for sustainable and friendly cities]}
%   \end{tabularx}
%   \vspace*{-0.2cm}
 \end{center}

\newpage
%%

%% Table of Contents
\tableofcontents
\newpage
%%

\section{Overview}
\label{sec:overview}
\color{black}
This document describes the Service Registry Core System, which exists to enable service discovery in a Eclipse Arrowhead Local Cloud (LC). Examples of such interactions is a provider system offering some kind of Service for use by other systems in the LC. This mandatory Core System provides a database, which stores information related to the currently actively offered Services within the Local Cloud.

The rest of this document is organized as follows.
In Section \ref{sec:prior_art}, we reference major prior art capabilities
of the system.
In Section \ref{sec:use}, we the intended usage of the system.
In Section \ref{sec:properties}, we describe fundamental properties
provided by the system.
In Section \ref{sec:delimitations}, we describe delimitations of capabilities
of the system.
In Section \ref{sec:services}, we describe the abstract service
functions consumed or produced by the system.
In Section \ref{sec:security}, we describe the security capabilities
of the system.

\newpage

\subsection{Significant Prior Art}
\label{sec:prior_art}

\color{red}
Describe significant prior art which provides the
foundation for the system - May be omitted for simple services
\color{black}  

\subsection{How This System Is Meant to Be Used}
\label{sec:use}

Service Registry is a mandatory core system of Eclipse Arrowhead and is responsible for the fundamental service discovery functionality. Systems and services are being discoverable for other systems by consuming the services provided by Service Registry Core System.

An application or other core system is required to register itself and its services into Service Registry at its start-up and to unregister before shutdown or when it does not intend to continue to provide its services. Querying specifed services directly from Service Registry is primarily permitted to Orchestrator Core System, but public core services - offered by supporting core systems - are also queyable for application systems. 

\subsection{System functionalities and properties}
\label{sec:properties}

\color{red}
Describe system functionalities and properties like e.g.:
\subsubsection {Functional properties of the system}

\subsubsection {Configuration of the system}
Available parameters

\subsubsection {Data stored by the system}

Brief overview of data stored to achive the functionality of the system. 

\subsubsection {Non functional properties}

\begin{itemize}
  \item security, 
  \item safety, 
  \item energy consumption,
  \item latency
  \item Power saving properties, 
\end{itemize}

\subsubsection {Stateful or stateless}
\begin{itemize} 
\item states preserved, functional and non-functional
\end{itemize}  
\color{black}  


\subsection{Important Delimitations}
\label{sec:delimitations}

\color{red}
Provide delimitations of the provided system. Describe what the system
solve and what i does not solve.
\color{black}  



\newpage

\section{Services produced}
\label{sec:services}

\msubsection{service}{echo}
This service is offered for both application and core systems too. \color{red}todo\color{black}

\msubsection{service}{service-register}
This service is offered for both application and core systems too.
\color{red}todo\color{black}

\msubsection{service}{service-unregister}
This service is offered for both application and core systems too.
\color{red}todo\color{black}

\msubsection{service}{register-system}
This service is offered for both application and core systems too.
\color{red}todo\color{black}

\msubsection{service}{unregister-system}
This service is offered for both application and core systems too.
\color{red}todo\color{black}

\msubsection{service}{query}
This service is offered for both application and core systems too.
\color{red}todo\color{black}

\msubsection{service}{query-multi}
This service is offered only for specified core systems.
\color{red}todo\color{black}

\msubsection{service}{query-all}
This service is offered only for specified core systems.
\color{red}todo\color{black}

\msubsection{service}{query-by-system}
This service is offered only for specified core systems.
\color{red}todo\color{black}

\msubsection{service}{query-by-system-id}
This service is offered only for specified core systems.
\color{red}todo\color{black}

\msubsection{service}{pull-system}
This service is offered only for specified core systems.
\color{red}todo\color{black}

\newpage

\section{Security}
\label{sec:security}
\color{red}
\begin{itemize}
\item  If the system can be started in un-secure and/or
Arrowhead secure mode.
\item Handling of Arrowhead compliant and
non-compliant X.509 certificates.
\item Implemented security model shall be described, protocol used, data
protection used, system authentication capability, produced service
authorisation checking, etc.
\end{itemize}
For Arrowhead certificate profile
see github.com/eclipse-arrowhead/documentation
\color{black}




\bibliographystyle{IEEEtran}
\bibliography{bibliography}

\newpage

\section{Revision History}
\subsection{Amendments}

\color{red}
Revision history and Quality assurance as per examples below
\color{black}

\noindent\begin{tabularx}{\textwidth}{| p{1cm} | p{3cm} | p{2cm} | X | p{4cm} |} \hline
\rowcolor{gray!33} No. & Date & Version & Subject of Amendments & Author \\ \hline

1 & 2020-12-05 & \arrowversion & & Tanyi Szvetlin \\ \hline
2 & 2021-07-14 & \arrowversion & Minor updates & Jerker Delsing \\ \hline
3 & 2022-01-12 & \arrowversion & Minor updates & Jerker Delsing \\ \hline
\end{tabularx}

\subsection{Quality Assurance}

\noindent\begin{tabularx}{\textwidth}{| p{1cm} | p{3cm} | p{2cm} | X |} \hline
\rowcolor{gray!33} No. & Date & Version & Approved by \\ \hline

1 & 2022-01-10 & \arrowversion  &  \\ \hline

\end{tabularx}

\end{document}